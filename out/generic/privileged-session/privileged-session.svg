<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1334px" preserveAspectRatio="none" style="width:1297px;height:1334px;" version="1.1" viewBox="0 0 1297 1334" width="1297px" zoomAndPan="magnify"><defs><filter height="300%" id="f1hbwr2qxuyhqt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" height="1322.2031" style="stroke:#A80036;stroke-width:1.0;" width="273" x="1" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="34" x="120.5" y="18.0669">User</text><rect fill="#008000" height="1322.2031" style="stroke:#A80036;stroke-width:1.0;" width="1013.5" x="276" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="72" x="746.75" y="18.0669">cloud.gov</text><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="436.9922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="248" y="192.9609"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="445.9922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="358" y="821.9141"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="768.5" y="280.3594"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="768.5" y="909.3125"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="262.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1012.5" y="367.7578"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="262.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1012.5" y="996.7109"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="174.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1176.5" y="426.0234"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="174.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1176.5" y="1054.9766"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="30" x2="30" y1="73.4297" y2="1276.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="253" x2="253" y1="73.4297" y2="1276.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="363" x2="363" y1="759" y2="1276.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="584" x2="584" y1="73.4297" y2="1276.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="773" x2="773" y1="73.4297" y2="1276.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1017.5" x2="1017.5" y1="73.4297" y2="1276.9063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1181.5" x2="1181.5" y1="73.4297" y2="1276.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="5" y="70.1279">admin</text><ellipse cx="30" cy="41.1328" fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="18" x2="42" y1="55.1328" y2="55.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="44" x="5" y="1288.9014">admin</text><ellipse cx="30" cy="1308.2031" fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" rx="12" ry="12" style="stroke:#A80036;stroke-width:2.0;"/><line style="stroke:#A80036;stroke-width:2.0;" x1="18" x2="42" y1="1322.2031" y2="1322.2031"/><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="30" x="236" y="38.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="243" y="58.1279">cli</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="30" x="236" y="1275.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="16" x="243" y="1295.9014">cli</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="162" x="280" y="1275.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="287" y="1295.9014">cloud.gov dashboard</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="158" x="503" y="38.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="510" y="58.1279">cloud.gov controller</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="158" x="503" y="1275.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="144" x="510" y="1295.9014">cloud.gov controller</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="193" x="675" y="38.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="682" y="58.1279">cloud.gov authentication</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="193" x="675" y="1275.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="179" x="682" y="1295.9014">cloud.gov authentication</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="82" x="974.5" y="38.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="981.5" y="58.1279">ssh proxy</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="82" x="974.5" y="1275.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="981.5" y="1295.9014">ssh proxy</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="204" x="1077.5" y="38.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="1084.5" y="58.1279">application container sshd</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="204" x="1077.5" y="1275.9063"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="1084.5" y="1295.9014">application container sshd</text><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="436.9922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="248" y="192.9609"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="445.9922" style="stroke:#A80036;stroke-width:1.0;" width="10" x="358" y="821.9141"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="768.5" y="280.3594"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="58.2656" style="stroke:#A80036;stroke-width:1.0;" width="10" x="768.5" y="909.3125"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="262.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1012.5" y="367.7578"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="262.1953" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1012.5" y="996.7109"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="174.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1176.5" y="426.0234"/><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="174.7969" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1176.5" y="1054.9766"/><rect fill="#EEEEEE" filter="url(#f1hbwr2qxuyhqt)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1290.5" x="0" y="103.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1290.5" y1="103.9961" y2="103.9961"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1290.5" y1="106.9961" y2="106.9961"/><rect fill="#EEEEEE" filter="url(#f1hbwr2qxuyhqt)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="398" x="446.25" y="93.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="384" x="452.25" y="109.4966">Requesting an authenticated session using the CLI</text><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="40.2656" style="stroke:#000000;stroke-width:2.0;" width="662" x="2" y="126.5625"/><polygon fill="#EEEEEE" points="2,126.5625,70,126.5625,70,133.5625,60,143.5625,2,143.5625,2,126.5625" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23" x="15" y="140.6294">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="529" x="70.5" y="159.6294">9.d Privileged User Access: The administrator authenticates with the cloud.gov API</text><polygon fill="#A80036" points="236,188.9609,246,192.9609,236,196.9609,240,192.9609" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="242" y1="192.9609" y2="192.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-style="italic" lengthAdjust="spacing" textLength="125" x="37" y="187.895">cf ssh &lt;appname&gt;</text><polygon fill="#A80036" points="572,218.0938,582,222.0938,572,226.0938,576,222.0938" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="578" y1="222.0938" y2="222.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="265" y="217.0278">request GUID for &lt;appname&gt;</text><polygon fill="#A80036" points="572,247.2266,582,251.2266,572,255.2266,576,251.2266" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="578" y1="251.2266" y2="251.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="265" y="246.1606">request SSH endpoint details</text><polygon fill="#A80036" points="756.5,276.3594,766.5,280.3594,756.5,284.3594,760.5,280.3594" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="762.5" y1="280.3594" y2="280.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="265" y="275.2935">request SSH client auth code</text><polygon fill="#A80036" points="1005.5,305.4922,1015.5,309.4922,1005.5,313.4922,1009.5,309.4922" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="778.5" x2="1011.5" y1="309.4922" y2="309.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="785.5" y="304.4263">add to authorized_users</text><polygon fill="#A80036" points="269,334.625,259,338.625,269,342.625,265,338.625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="263" x2="772.5" y1="338.625" y2="338.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="275" y="333.5591">return code</text><polygon fill="#A80036" points="1000.5,363.7578,1010.5,367.7578,1000.5,371.7578,1004.5,367.7578" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="1006.5" y1="367.7578" y2="367.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="265" y="362.6919">present SSH client auth code</text><polygon fill="#A80036" points="784.5,392.8906,774.5,396.8906,784.5,400.8906,780.5,396.8906" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="778.5" x2="1011.5" y1="396.8906" y2="396.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="790.5" y="391.8247">verify authorization to application</text><polygon fill="#A80036" points="1164.5,422.0234,1174.5,426.0234,1164.5,430.0234,1168.5,426.0234" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1022.5" x2="1170.5" y1="426.0234" y2="426.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1029.5" y="420.9575">establish ssh session</text><polygon fill="#A80036" points="1033.5,451.1563,1023.5,455.1563,1033.5,459.1563,1029.5,455.1563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1027.5" x2="1175.5" y1="455.1563" y2="455.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1039.5" y="450.0903">present session</text><polygon fill="#A80036" points="269,480.2891,259,484.2891,269,488.2891,265,484.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="263" x2="1011.5" y1="484.2891" y2="484.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="275" y="479.2231">proxy session</text><polygon fill="#A80036" points="41,509.4219,31,513.4219,41,517.4219,37,513.4219" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="247" y1="513.4219" y2="513.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="47" y="508.356">present authenticated session</text><polygon fill="#A80036" points="1164.5,538.5547,1174.5,542.5547,1164.5,546.5547,1168.5,542.5547" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="1170.5" y1="542.5547" y2="542.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="37" y="537.4888">run commands</text><polygon fill="#A80036" points="1164.5,567.6875,1174.5,571.6875,1164.5,575.6875,1168.5,571.6875" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="1170.5" y1="571.6875" y2="571.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="37" y="566.6216">terminate session</text><polygon fill="#A80036" points="1033.5,596.8203,1023.5,600.8203,1033.5,604.8203,1029.5,600.8203" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1027.5" x2="1180.5" y1="600.8203" y2="600.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="1039.5" y="595.7544">session terminated</text><polygon fill="#A80036" points="264,625.9531,254,629.9531,264,633.9531,260,629.9531" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="258" x2="1016.5" y1="629.9531" y2="629.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="270" y="624.8872">session terminated</text><rect fill="#EEEEEE" filter="url(#f1hbwr2qxuyhqt)" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1290.5" x="0" y="658.5195"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1290.5" y1="658.5195" y2="658.5195"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1290.5" y1="661.5195" y2="661.5195"/><rect fill="#EEEEEE" filter="url(#f1hbwr2qxuyhqt)" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="531" x="379.75" y="647.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="517" x="385.75" y="664.02">Requesting an authenticated session using the cloud.gov dashboard</text><rect fill="#FFFFFF" filter="url(#f1hbwr2qxuyhqt)" height="40.2656" style="stroke:#000000;stroke-width:2.0;" width="662" x="2" y="681.0859"/><polygon fill="#EEEEEE" points="2,681.0859,70,681.0859,70,688.0859,60,698.0859,2,698.0859,2,681.0859" style="stroke:#000000;stroke-width:2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="23" x="15" y="695.1528">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="577" x="46.5" y="714.1528">9.d Privileged User Access: The administrator authenticates with the cloud.gov dashboard</text><polygon fill="#A80036" points="268,743.4844,278,747.4844,268,751.4844,272,747.4844" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="274" y1="747.4844" y2="747.4844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146" x="37" y="742.4185">navigate to application</text><rect fill="#FEFECE" filter="url(#f1hbwr2qxuyhqt)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="162" x="280" y="726.3516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="287" y="746.3467">cloud.gov dashboard</text><polygon fill="#A80036" points="41,788.7813,31,792.7813,41,796.7813,37,792.7813" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="362" y1="792.7813" y2="792.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="47" y="787.7153">show application details</text><polygon fill="#A80036" points="346,817.9141,356,821.9141,346,825.9141,350,821.9141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="352" y1="821.9141" y2="821.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161" x="37" y="816.8481">application instance: SSH</text><polygon fill="#A80036" points="572,847.0469,582,851.0469,572,855.0469,576,851.0469" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368" x2="578" y1="851.0469" y2="851.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="375" y="845.981">request GUID for &lt;appname&gt;</text><polygon fill="#A80036" points="572,876.1797,582,880.1797,572,884.1797,576,880.1797" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368" x2="578" y1="880.1797" y2="880.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="375" y="875.1138">request SSH endpoint details</text><polygon fill="#A80036" points="756.5,905.3125,766.5,909.3125,756.5,913.3125,760.5,909.3125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368" x2="762.5" y1="909.3125" y2="909.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="375" y="904.2466">request SSH client auth code</text><polygon fill="#A80036" points="1005.5,934.4453,1015.5,938.4453,1005.5,942.4453,1009.5,938.4453" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="778.5" x2="1011.5" y1="938.4453" y2="938.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="785.5" y="933.3794">add to authorized_users</text><polygon fill="#A80036" points="379,963.5781,369,967.5781,379,971.5781,375,967.5781" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="373" x2="772.5" y1="967.5781" y2="967.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="385" y="962.5122">return code</text><polygon fill="#A80036" points="1000.5,992.7109,1010.5,996.7109,1000.5,1000.7109,1004.5,996.7109" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="368" x2="1006.5" y1="996.7109" y2="996.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="184" x="375" y="991.645">present SSH client auth code</text><polygon fill="#A80036" points="784.5,1021.8438,774.5,1025.8438,784.5,1029.8438,780.5,1025.8438" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="778.5" x2="1011.5" y1="1025.8438" y2="1025.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215" x="790.5" y="1020.7778">verify authorization to application</text><polygon fill="#A80036" points="1164.5,1050.9766,1174.5,1054.9766,1164.5,1058.9766,1168.5,1054.9766" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1022.5" x2="1170.5" y1="1054.9766" y2="1054.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="1029.5" y="1049.9106">establish ssh session</text><polygon fill="#A80036" points="1033.5,1080.1094,1023.5,1084.1094,1033.5,1088.1094,1029.5,1084.1094" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1027.5" x2="1175.5" y1="1084.1094" y2="1084.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="101" x="1039.5" y="1079.0435">present session</text><polygon fill="#A80036" points="379,1109.2422,369,1113.2422,379,1117.2422,375,1113.2422" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="373" x2="1011.5" y1="1113.2422" y2="1113.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="385" y="1108.1763">proxy session</text><polygon fill="#A80036" points="41,1138.375,31,1142.375,41,1146.375,37,1142.375" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="35" x2="357" y1="1142.375" y2="1142.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194" x="47" y="1137.3091">present authenticated session</text><polygon fill="#A80036" points="1164.5,1167.5078,1174.5,1171.5078,1164.5,1175.5078,1168.5,1171.5078" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="1170.5" y1="1171.5078" y2="1171.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="37" y="1166.4419">run commands</text><polygon fill="#A80036" points="1164.5,1196.6406,1174.5,1200.6406,1164.5,1204.6406,1168.5,1200.6406" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="30" x2="1170.5" y1="1200.6406" y2="1200.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="115" x="37" y="1195.5747">terminate session</text><polygon fill="#A80036" points="1033.5,1225.7734,1023.5,1229.7734,1033.5,1233.7734,1029.5,1229.7734" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="1027.5" x2="1180.5" y1="1229.7734" y2="1229.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="1039.5" y="1224.7075">session terminated</text><polygon fill="#A80036" points="379,1254.9063,369,1258.9063,379,1262.9063,375,1258.9063" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="373" x2="1016.5" y1="1258.9063" y2="1258.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="385" y="1253.8403">session terminated</text><!--MD5=[a278aa39e880673a12dddc658c115816]
@startuml
box "User" #LightBlue
	entity "admin" as admin
    participant cli
end box
box "cloud.gov" #Green
	participant "cloud.gov dashboard" as cgdashboard
	participant "cloud.gov controller" as capi
	participant "cloud.gov authentication" as uaa
	participant "ssh proxy" as sshproxy
	participant "application container sshd" as stagingapp
end box

== Requesting an authenticated session using the CLI==

ref over admin, capi: 9.d Privileged User Access: The administrator authenticates with the cloud.gov API
admin -> cli : //cf ssh <appname>//
activate cli
cli -> capi : request GUID for <appname>
cli -> capi : request SSH endpoint details
cli -> uaa : request SSH client auth code
activate uaa
uaa -> sshproxy : add to authorized_users
cli <- uaa : return code
deactivate uaa
cli -> sshproxy : present SSH client auth code
activate sshproxy
sshproxy -> uaa : verify authorization to application
sshproxy -> stagingapp : establish ssh session
activate stagingapp
sshproxy <- stagingapp : present session
cli <- sshproxy : proxy session
admin <- cli : present authenticated session
admin -> stagingapp : run commands
admin -> stagingapp : terminate session
sshproxy <- stagingapp : session terminated
deactivate stagingapp
cli <- sshproxy : session terminated
deactivate sshproxy
deactivate cli

== Requesting an authenticated session using the cloud.gov dashboard==
create cgdashboard
ref over admin, capi: 9.d Privileged User Access: The administrator authenticates with the cloud.gov dashboard
admin -> cgdashboard : navigate to application
admin <- cgdashboard : show application details
admin -> cgdashboard : application instance: SSH
activate cgdashboard
cgdashboard -> capi : request GUID for <appname>
cgdashboard -> capi : request SSH endpoint details
cgdashboard -> uaa : request SSH client auth code
activate uaa
uaa -> sshproxy : add to authorized_users
cgdashboard <- uaa : return code
deactivate uaa
cgdashboard -> sshproxy : present SSH client auth code
activate sshproxy
sshproxy -> uaa : verify authorization to application
sshproxy -> stagingapp : establish ssh session
activate stagingapp
sshproxy <- stagingapp : present session
cgdashboard <- sshproxy : proxy session
admin <- cgdashboard : present authenticated session
admin -> stagingapp : run commands
admin -> stagingapp : terminate session
sshproxy <- stagingapp : session terminated
deactivate stagingapp
cgdashboard <- sshproxy : session terminated
deactivate sshproxy
deactivate cli
@enduml

PlantUML version 1.2021.2(Sun Mar 07 11:10:27 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>